<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:SLSKDONET.ViewModels"
             mc:Ignorable="d" d:DesignWidth="300" d:DesignHeight="800"
             x:Class="SLSKDONET.Views.Avalonia.PlayerControl"
             x:DataType="vm:PlayerViewModel"
             Background="#252526">
    
    <!-- Vertical Player for Right Sidebar -->
    <Grid RowDefinitions="Auto,Auto,*,Auto">
        
        <!-- Header -->
        <Border Grid.Row="0" 
                Background="#2D2D2D" 
                Padding="16,12"
                BorderBrush="#3E3E3E"
                BorderThickness="0,0,0,1">
            <TextBlock Text="Now Playing" 
                       FontSize="14" 
                       FontWeight="SemiBold"
                       Foreground="White"/>
        </Border>
        
        <!-- Album Art & Track Info -->
        <StackPanel Grid.Row="1" Margin="16,20,16,16" Spacing="16">
            <!-- Album Art -->
            <Border Width="260" Height="260" 
                    Background="#1E1E1E" 
                    CornerRadius="8"
                    HorizontalAlignment="Center">
                <TextBlock Text="ðŸŽµ" 
                           FontSize="80" 
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Center"
                           Foreground="#404040"/>
            </Border>
            
            <!-- Track Info -->
            <StackPanel Spacing="8">
                <TextBlock Text="{Binding TrackTitle}" 
                           FontSize="16" 
                           FontWeight="SemiBold"
                           Foreground="White"
                           TextTrimming="CharacterEllipsis"
                           TextWrapping="Wrap"
                           MaxLines="2"
                           TextAlignment="Center"/>
                <TextBlock Text="{Binding TrackArtist}" 
                           FontSize="13" 
                           Foreground="#B3B3B3"
                           TextTrimming="CharacterEllipsis"
                           TextAlignment="Center"/>
            </StackPanel>
        </StackPanel>
        
        <!-- Spacer -->
        <Border Grid.Row="2"/>
        
        <!-- Controls Section -->
        <StackPanel Grid.Row="3" Spacing="16" Margin="16,0,16,20">
            
            <!-- Progress Bar -->
            <StackPanel Spacing="8">
                <Slider Minimum="0"
                        Maximum="1"
                        Value="{Binding Position, Mode=TwoWay}"
                        Height="20"
                        Foreground="#1DB954">
                    <Slider.Styles>
                        <Style Selector="Slider /template/ Thumb">
                            <Setter Property="Background" Value="White"/>
                            <Setter Property="Width" Value="14"/>
                            <Setter Property="Height" Value="14"/>
                            <Setter Property="CornerRadius" Value="7"/>
                        </Style>
                    </Slider.Styles>
                </Slider>
                
                <!-- Time Labels -->
                <Grid ColumnDefinitions="*,*">
                    <TextBlock Grid.Column="0" 
                               Text="{Binding CurrentTimeStr}" 
                               FontSize="11" 
                               Foreground="#B3B3B3"/>
                    <TextBlock Grid.Column="1" 
                               Text="{Binding TotalTimeStr}" 
                               FontSize="11" 
                               Foreground="#B3B3B3"
                               HorizontalAlignment="Right"/>
                </Grid>
            </StackPanel>
            
            <!-- Playback Controls -->
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center" 
                        Spacing="16">
                <!-- Previous -->
                <Button Command="{Binding PreviousCommand}"
                        Background="Transparent"
                        BorderThickness="0"
                        Width="40" Height="40"
                        ToolTip.Tip="Previous">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="Background" Value="#2D2D2D"/>
                        </Style>
                    </Button.Styles>
                    <TextBlock Text="â®ï¸" FontSize="20"/>
                </Button>
                
                <!-- Play/Pause -->
                <Button Command="{Binding PlayPauseCommand}"
                        Background="#1DB954"
                        Foreground="Black"
                        Width="48" Height="48"
                        CornerRadius="24"
                        BorderThickness="0"
                        Cursor="Hand">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="Background" Value="#1ED760"/>
                        </Style>
                    </Button.Styles>
                    <TextBlock Text="{Binding IsPlaying, Converter={StaticResource BoolToPlayPauseIconConverter}}" 
                               FontSize="22"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Button>
                
                <!-- Next -->
                <Button Command="{Binding NextCommand}"
                        Background="Transparent"
                        BorderThickness="0"
                        Width="40" Height="40"
                        ToolTip.Tip="Next">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="Background" Value="#2D2D2D"/>
                        </Style>
                    </Button.Styles>
                    <TextBlock Text="â­ï¸" FontSize="20"/>
                </Button>
            </StackPanel>
            
            <!-- Shuffle & Repeat Controls -->
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center" 
                        Spacing="16"
                        Margin="0,12,0,0">
                <!-- Shuffle -->
                <Button Command="{Binding ToggleShuffleCommand}"
                        Background="Transparent"
                        BorderThickness="0"
                        Width="36" Height="36"
                        ToolTip.Tip="Shuffle">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="Background" Value="#2D2D2D"/>
                        </Style>
                    </Button.Styles>
                    <TextBlock Text="ðŸ”€" 
                               FontSize="16" 
                               Foreground="{Binding IsShuffling, Converter={StaticResource BoolToColorConverter}}"/>
                </Button>
                
                <!-- Repeat -->
                <Button Command="{Binding ToggleRepeatCommand}"
                        Background="Transparent"
                        BorderThickness="0"
                        Width="36" Height="36"
                        ToolTip.Tip="{Binding RepeatMode}">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="Background" Value="#2D2D2D"/>
                        </Style>
                    </Button.Styles>
                    <TextBlock Text="{Binding RepeatMode, Converter={StaticResource RepeatModeIconConverter}}" 
                               FontSize="16" 
                               Foreground="{Binding RepeatMode, Converter={StaticResource RepeatModeColorConverter}}"/>
                </Button>
            </StackPanel>
            
            <!-- Volume Control -->
            <StackPanel Spacing="8">
                <Grid ColumnDefinitions="Auto,*">
                    <TextBlock Grid.Column="0" 
                               Text="ðŸ”Š" 
                               FontSize="14" 
                               Foreground="#B3B3B3"
                               VerticalAlignment="Center"
                               Margin="0,0,12,0"/>
                    
                    <Slider Grid.Column="1"
                            Minimum="0"
                            Maximum="100"
                            Value="{Binding Volume, Mode=TwoWay}"
                            Height="20">
                        <Slider.Styles>
                            <Style Selector="Slider /template/ Thumb">
                                <Setter Property="Background" Value="White"/>
                                <Setter Property="Width" Value="12"/>
                                <Setter Property="Height" Value="12"/>
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Slider.Styles>
                    </Slider>
                </Grid>
            </StackPanel>
            
            <!-- Like & Queue Buttons -->
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center" 
                        Spacing="12">
                <Button Background="Transparent"
                        BorderThickness="0"
                        Width="36" Height="36"
                        ToolTip.Tip="Like">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="Background" Value="#2D2D2D"/>
                        </Style>
                    </Button.Styles>
                    <TextBlock Text="â™¡" FontSize="18" Foreground="#B3B3B3"/>
                </Button>
                
                <Button Background="Transparent"
                        BorderThickness="0"
                        Width="36" Height="36"
                        ToolTip.Tip="Queue">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="Background" Value="#2D2D2D"/>
                        </Style>
                    </Button.Styles>
                    <TextBlock Text="ðŸ“‹" FontSize="16" Foreground="#B3B3B3"/>
                </Button>
            </StackPanel>
        </StackPanel>
    </Grid>
</UserControl>
